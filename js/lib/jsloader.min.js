!function(a,b){var c,d={},e={},f="$$",g=[],h=[],i={base:"",charset:"utf-8",isDebug:!0,alias:{}},j=document.head||document.getElementsByTagName("head")[0]||document.documentElement,k=j.getElementsByTagName("base")[0],l=function(a){return x(a)&&1===a.length?a[0]:a},m=function(a){var b=[];a="string"==typeof a?[a]:a;for(var c,d=0;c=a[d++];)c=i.alias[c]?i.alias[c]:c,c=r(c),c=s(c),c=t(c),b.push(c);return b},n=function(a){var d=document.createElement("script");d.charset=i.charset,o(d),d.async=!0,d.src=a,c=d,k?j.insertBefore(d,k):j.appendChild(d),c=b},o=function(a){a.onload=a.onreadystatechange=function(){(!a.readyState||/loaded|complete/.test(a.readyState))&&(a.onload=a.onreadystatechange=null,a.parentNode&&a.parentNode.removeChild(a),a=null)}},p=function(){var a,b,d;if(c)return c.src;if(document.currentScript)return document.currentScript.src;try{throw Error("")}catch(e){if(a=e.stack,!a&&window.opera&&(a=(String(e).match(/of linked script \S+/g)||[]).join(" ")),a)return a=a.split(/[@ ]/g).pop(),a="("===a[0]?a.slice(1,-1):a.replace(/\s/,""),a.replace(/(:\d+)?:\d+$/i,"")}try{d=document.getElementsByTagName("script");for(var f,g=0;f=d[g++];)if("interactive"===f.readyState)return b=document.querySelector?f.src:f.getAttribute("src",4)}catch(e){z("getCurScript is fail.\n")}return""},q=function(){return document.location.href.substring(0,document.location.href.lastIndexOf("/"))},r=function(a){var b=/(^file:\/\/)|(^http:\/\/)|(^https:\/\/)/,c=/(^\/)/,d=/(\/$)/,e="/",f=i.base;return b.test(a)||(a=d.test(f)?c.test(a)?f+a.substr(1):f+a:c.test(a)?f+a:f+e+a,b.test(f)||(a=q()+(c.test(a)?"":e)+a)),a},s=function(a){var b=[],c=/(\.js$)|(\.js\?)/;return c.test(a)||(a.indexOf("?")>-1&&a.indexOf("?")!=a.length-1?(b=a.split("?"),b[0]+=".js?",a=b.join("")):a+=".js"),a},t=function(a){var b=/\/\.\//g,c=/\/[^/]+\/\.\.\//;for(a=a.replace(b,"/");a.match(c);)a=a.replace(c,"/");return a},u=function(a){return function(b){return{}.toString.call(b)==="[object "+a+"]"}},v=u("Object"),w=u("String"),x=Array.isArray||u("Array"),y=u("Function"),z=function(b){i.isDebug&&(a.console?console.error(b):alert(b))},A=function(a){var b,c,h=[];for(var i in e)if((i==a||i.indexOf(a)>-1)&&(b=e[i],y(b))){c=i.split(f);for(var j,k=0;j=c[k++];){if(!d[j]||!d[j].length||g[j]+1!=d[j].length)return;h.push(l(C(j)))}b.apply(null,h),delete e[i]}},B=function(a,c){b==h[a]?h[a]=[c]:h[a].push(c)},C=function(a){for(var b=d[a],c=h[a],e=[],f=0,g=b.length;g>f;f++)e[c[f]]=b[f];return e},D=function(a){for(var b in a)i[b]=a[b]},E=function(a,c){var e,f,h=p(),i="run the define fail. \n";try{if(y(a)||v(a))e=a;else{if(f=w(a)?[a.toString()]:a,!x(f))throw"define param[deps] error.\n";if(!y(c))throw"define param[factory] is not function.\n";e=c}b==g[h]?g[h]=0:g[h]++,b==d[h]&&(d[h]=[]),b!=f?F(a,function(a,b){return function(){B(a,b),d[a].push(e.apply(null,arguments)),A(a)}}(h,g[h],e)):(B(h,g[h]),d[h].push(y(e)?e():e),A(h))}catch(j){i+=j,i+="\n",i+=h,z(i)}},F=function(a,c){var g=m(a),h=g.join(f);"function"==typeof c?e[h]=c:z("params[callback] error in require. \n"+h);for(var i,j=0;i=g[j++];)b===d[i]?n(i):A(i)};!function(){var a=document.getElementsByTagName("script"),c=document.getElementById("loader-node")||a[a.length-1],d=c.getAttribute("data-main");d&&F(d,function(){}),b===window.jsloader&&(window.jsloader={version:"2.0",config:D,define:E,require:F},window.define=jsloader.define,window.require=jsloader.require)}()}(window);
//# sourceMappingURL=jsloader.js.map